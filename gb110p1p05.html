<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ìŠ¤ì˜ì–´ì „ë¬¸í•™ì›: ê·¸ë°”ìœ 5 (ì˜ì‘)</title>
    <style>
        :root { --primary-color: #4A90E2; --secondary-bg: #F0F4F8; --text-main: #2D3748; --hint-bg: #FFF5F5; --hint-text: #E53E3E; }
        body { font-family: 'Pretendard', sans-serif; background-color: #F7FAFC; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; width: 95%; max-width: 550px; padding: 35px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08); margin: 20px; text-align: center; }
        .hidden { display: none; }
        
        h2 { color: #1A365D; margin-bottom: 20px; }
        .guide-box { background: var(--secondary-bg); padding: 12px; border-radius: 8px; font-size: 0.95rem; margin-bottom: 20px; border-left: 4px solid var(--primary-color); }
        
        /* íŒíŠ¸ ì •ë³´ì°½ */
        .hint-container { background: var(--hint-bg); border: 1px dashed var(--hint-text); padding: 15px; border-radius: 10px; margin-bottom: 25px; text-align: left; }
        .hint-tag { font-size: 0.85rem; font-weight: bold; color: var(--hint-text); margin-bottom: 5px; display: block; }
        .hint-content { font-size: 1rem; color: #2D3748; font-weight: 600; }

        input[type="text"] { width: 100%; padding: 16px; margin-bottom: 12px; border: 1px solid #E2E8F0; border-radius: 10px; box-sizing: border-box; font-size: 1.1rem; outline: none; }
        input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1); }
        
        button { width: 100%; padding: 16px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-main { background-color: var(--primary-color); color: white; margin-bottom: 10px; }
        .btn-submit { background-color: #2D3748; color: white; margin-top: 10px; }

        .korean-text { font-size: 1.25rem; font-weight: 800; color: #1A202C; margin-bottom: 20px; word-break: keep-all; }
        
        .progress-bar { width: 100%; height: 6px; background: #EDF2F7; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        #progress-inner { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s; }
        
        .wrong-item { background: #FFF5F5; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid var(--hint-text); text-align: left; }
    </style>
</head>
<body>

<div class="container">
    <div id="setup-page">
        <h2>Toë¶€ì •ì‚¬ ì‹¤ì „ Part 5</h2>
        <div class="guide-box">íŒíŠ¸ ë‹¨ì–´ì™€ ë‹¨ì–´ ìˆ˜ë¥¼ í™•ì¸í•˜ë©° ì˜ì‘í•˜ì„¸ìš”.</div>
        <input type="text" id="school" placeholder="í•™êµëª…">
        <input type="text" id="name" placeholder="ì„±ëª…">
        <button class="btn-main" onclick="prepareQuiz()">ì‹œí—˜ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="quiz-page" class="hidden">
        <div class="progress-bar"><div id="progress-inner"></div></div>
        <div class="korean-text" id="korean-display"></div>
        
        <div class="hint-container">
            <span class="hint-tag">KEYWORD HINT</span>
            <div class="hint-content" id="keyword-hint"></div>
            <hr style="border:0; border-top:1px solid #fee2e2; margin:10px 0;">
            <span class="hint-tag">WORD COUNT</span>
            <div class="hint-content" id="count-hint"></div>
        </div>

        <input type="text" id="user-input" placeholder="ì˜ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
        <button class="btn-submit" onclick="submitAnswer()">ì •ë‹µ ì œì¶œ</button>
    </div>

    <div id="result-page" class="hidden">
        <h2>í…ŒìŠ¤íŠ¸ ì™„ë£Œ</h2>
        <h1 id="res-score" style="color:var(--primary-color); font-size: 3rem; margin: 20px 0;">0 / 10</h1>
        <div id="wrong-section" class="hidden">
            <h3 style="text-align:left; color:var(--hint-text);">ğŸ” ì˜¤ë‹µ ì²´í¬</h3>
            <div id="wrong-list"></div>
        </div>
        <button class="btn-main" onclick="downloadResult()">ê²°ê³¼ ì €ì¥</button>
        <button style="background:none; border:none; color:#A0AEC0; cursor:pointer;" onclick="location.reload()">ìƒˆ ë¬¸ì œ í’€ê¸°</button>
    </div>
</div>

<script>
    const quizData = [
        { "korean": "ê·¸ë…€ë„ ì—­ì‹œ ì¢‹ì€ ì‚¬ì§„ì„ ì°ê³  ì‹¶ì—ˆë‹¤.", "hints": ["take", "wanted"], "count": 7, "ans": "She wanted to take good pictures, too" },
        { "korean": "ë‚˜ì˜ ê³„íšì€ ìŠ¤í˜ì¸ì–´ë¥¼ ë°°ìš°ëŠ” ê²ƒì´ë‹¤.", "hints": ["learn", "plan"], "count": 6, "ans": "My plan is to learn Spanish" },
        { "korean": "ê·¸ëŠ” ë°–ì— ë‚˜ê°€ì„œ ê·¸ì˜ ë°±ì„±ë“¤ì„ ë§Œë‚˜ëŠ” ê²ƒì„ ì¢‹ì•„í–ˆìŠµë‹ˆë‹¤.", "hints": ["meet", "liked"], "count": 9, "ans": "He liked to go out and meet his people" },
        { "korean": "ì ì‹¬ ë¨¹ëŠ” ê²ƒì„ ìŠì—ˆë„¤.", "hints": ["forgot", "have"], "count": 5, "ans": "I forgot to have lunch" },
        { "korean": "ë¯¸ì†Œë¥¼ ì§“ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”!", "hints": ["smile", "forget"], "count": 4, "ans": "Don't forget to smile" },
        { "korean": "ë‚´ ì†Œì›ì€ ì–¸ë•ì— ìˆëŠ” ì§‘ì—ì„œ ì‚¬ëŠ” ê²ƒì´ì•¼.", "hints": ["is", "live"], "count": 10, "ans": "My wish is to live in a house on the hill" },
        { "korean": "ë‚˜ëŠ” ë§¤ì¼ 3ê°œì˜ í‘œí˜„ì„ ì™¸ìš°ë ¤ê³  ë…¸ë ¥í•œë‹¤.", "hints": ["try", "memorize"], "count": 8, "ans": "I try to memorize three expressions every day" },
        { "korean": "ë‚˜ëŠ” ì˜ì–´ë¥¼ ì˜í•˜ê³  ì‹¶ì–´.", "hints": ["want", "be"], "count": 7, "ans": "I want to be good at English" },
        { "korean": "ê·¸ëŠ” ë™ë¬¼ ì¹œêµ¬ë¥¼ ì–»ê²Œ ë˜ê¸°ë¥¼ ì›í•œë‹¤.", "hints": ["wants", "have"], "count": 6, "ans": "He wants to have an animal friend" },
        { "korean": "ê·¸ëŠ” ê¸´ ë¶“ì„ ì§‘ì–´ ë“¤ê³  ê·¸ë¦¼ì„ ê·¸ë¦¬ê¸° ì‹œì‘í–ˆë‹¤.", "hints": ["started", "picked up"], "count": 10, "ans": "He picked up a long brush and started to paint" }
    ];

    let quizSet = [], currentIdx = 0, score = 0, results = [];

    function prepareQuiz() {
        if (!document.getElementById('name').value) return alert("ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.");
        quizSet = [...quizData].sort(() => Math.random() - 0.5).slice(0, 10);
        currentIdx = 0; score = 0; results = [];
        document.getElementById('setup-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if (currentIdx >= 10) return finishQuiz();
        const item = quizSet[currentIdx];
        document.getElementById('korean-display').innerText = item.korean;
        document.getElementById('keyword-hint').innerText = item.hints.join(", ");
        document.getElementById('count-hint').innerText = `${item.count} ë‹¨ì–´ë¡œ ì‘ì„±í•˜ì„¸ìš”.`;
        document.getElementById('user-input').value = '';
        document.getElementById('user-input').focus();
        document.getElementById('progress-inner').style.width = (currentIdx / 10 * 100) + "%";
    }

    function submitAnswer() {
        const userAns = document.getElementById('user-input').value.trim();
        if (!userAns) return alert("ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”.");
        
        const item = quizSet[currentIdx];
        const isCorrect = userAns.replace(/[\.\,\?]/g, "").toLowerCase() === item.ans.replace(/[\.\,\?]/g, "").toLowerCase();
        
        results.push({ q: item.korean, user: userAns, ans: item.ans, isCorrect });
        if (isCorrect) score++;
        currentIdx++;
        loadQuestion();
    }

    document.getElementById('user-input').onkeypress = (e) => { if(e.key === 'Enter') submitAnswer(); };

    function finishQuiz() {
        document.getElementById('quiz-page').classList.add('hidden');
        document.getElementById('result-page').classList.remove('hidden');
        document.getElementById('res-score').innerText = score + " / 10";
        const wrongList = results.filter(r => !r.isCorrect);
        if (wrongList.length > 0) {
            document.getElementById('wrong-section').classList.remove('hidden');
            const area = document.getElementById('wrong-list');
            area.innerHTML = '';
            wrongList.forEach(w => {
                area.innerHTML += `<div class="wrong-item"><strong>${w.q}</strong><br>ë‚´ ë‹µ: <span style="color:red">${w.user}</span><br>ì •ë‹µ: <span style="color:green">${w.ans}</span></div>`;
            });
        }
    }

    function downloadResult() {
        const txt = results.map(r => `${r.isCorrect?'[O]':'[X]'} ${r.q}\në‹µ: ${r.user}\nì •: ${r.ans}`).join('\n\n');
        const blob = new Blob([txt], {type:'text/plain'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `${document.getElementById('name').value}_ê·¸ë°”ìœ 5.txt`;
        a.click();
    }
</script>
</body>
</html>