<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ìŠ¤ì˜ì–´ì „ë¬¸í•™ì›: ê·¸ë°”ìœ 6 (ìš©ë²• ë° ìˆ˜ì‹ëŒ€ìƒ)</title>
    <style>
        :root { --primary-color: #4A90E2; --secondary-bg: #F0F4F8; --text-main: #2D3748; --accent-color: #ED8936; }
        body { font-family: 'Pretendard', sans-serif; background-color: #F7FAFC; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; width: 95%; max-width: 550px; padding: 35px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08); text-align: center; }
        .hidden { display: none; }
        
        h2 { color: #1A365D; margin-bottom: 25px; }
        .guide-box { background: var(--secondary-bg); padding: 12px; border-radius: 8px; font-size: 0.95rem; margin-bottom: 25px; border-left: 4px solid var(--primary-color); text-align: left; }
        
        /* ë¬¸í•­ ë””ìì¸ */
        #question-text { font-size: 1.25rem; font-weight: 700; margin: 30px 0; color: #1A202C; line-height: 1.6; }
        
        /* ìš©ë²• ì„ íƒ ë²„íŠ¼ */
        .usage-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .btn-usage { padding: 15px; border: 2px solid #EDF2F7; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-usage.selected { border-color: var(--primary-color); background: #EBF8FF; color: var(--primary-color); }
        
        /* ìˆ˜ì‹ëŒ€ìƒ ì…ë ¥ì°½ */
        .target-input-area { margin-bottom: 25px; text-align: left; }
        .target-label { font-size: 0.9rem; font-weight: bold; color: var(--accent-color); margin-bottom: 8px; display: block; }
        input[type="text"] { width: 100%; padding: 14px; border: 1px solid #E2E8F0; border-radius: 10px; box-sizing: border-box; font-size: 16px; outline: none; }
        input:focus { border-color: var(--accent-color); }

        button.btn-submit { width: 100%; padding: 16px; background: #2D3748; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        
        .progress-bar { width: 100%; height: 6px; background: #EDF2F7; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        #progress-inner { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s; }
        
        .wrong-item { background: #FFF5F5; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #E53E3E; text-align: left; }
    </style>
</head>
<body>

<div class="container">
    <div id="setup-page">
        <h2>Toë¶€ì •ì‚¬ ì‹¤ì „ Part 6</h2>
        <div class="guide-box">ìš©ë²•ì„ ì„ íƒí•˜ê³ , í•´ë‹¹ toë¶€ì •ì‚¬ê°€ ê¾¸ë©°ì£¼ëŠ” ë‹¨ì–´(ìˆ˜ì‹ ëŒ€ìƒ)ë¥¼ ì“°ì„¸ìš”.</div>
        <input type="text" id="name" placeholder="ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
        <button class="btn-submit" style="margin-top:20px; background:var(--primary-color)" onclick="prepareQuiz()">ì‹œí—˜ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="quiz-page" class="hidden">
        <div class="progress-bar"><div id="progress-inner"></div></div>
        <div class="guide-box">ğŸ’¡ ìš©ë²• ì„ íƒ í›„, í™”ì‚´í‘œê°€ ê°€ë¦¬í‚¤ëŠ” ëŒ€ìƒ(ìˆ˜ì‹ì–´êµ¬)ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
        <div id="question-text"></div>
        
        <div class="usage-btns">
            <button class="btn-usage" id="btn-adj" onclick="selectUsage('í˜•ìš©ì‚¬')">í˜•ìš©ì‚¬ì  ìš©ë²•</button>
            <button class="btn-usage" id="btn-adv" onclick="selectUsage('ë¶€ì‚¬')">ë¶€ì‚¬ì  ìš©ë²•</button>
        </div>

        <div class="target-input-area">
            <span class="target-label">ìˆ˜ì‹ë°›ëŠ” ë‹¨ì–´(êµ¬)ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</span>
            <input type="text" id="target-input" placeholder="ì˜ˆ: sorry, plan, way ë“±" autocomplete="off">
        </div>

        <button class="btn-submit" onclick="submitAnswer()">ë‹¤ìŒ ë¬¸ì œ</button>
    </div>

    <div id="result-page" class="hidden">
        <h2>í…ŒìŠ¤íŠ¸ ì™„ë£Œ</h2>
        <div style="font-size: 2.5rem; font-weight: 800; color: var(--primary-color); margin-bottom: 20px;">
            <span id="score-val">0</span> / 10
        </div>
        <div id="wrong-list" style="margin-bottom:20px;"></div>
        <button class="btn-submit" style="background:var(--primary-color)" onclick="location.reload()">ìƒˆ ë¬¸ì œ í’€ê¸°</button>
    </div>
</div>

<script>
    const allQuestions = [
        { "q": "I'm sorry to hear that.", "ans_usage": "ë¶€ì‚¬", "ans_target": "sorry" },
        { "q": "So we need homework to review the lessons.", "ans_usage": "í˜•ìš©ì‚¬", "ans_target": "homework" },
        { "q": "Every Sunday I make a plan to spend my money wisely.", "ans_usage": "í˜•ìš©ì‚¬", "ans_target": "plan" },
        { "q": "I have a special way to learn new words.", "ans_usage": "í˜•ìš©ì‚¬", "ans_target": "way" },
        { "q": "I'm glad to see you at last.", "ans_usage": "ë¶€ì‚¬", "ans_target": "glad" },
        { "q": "She worked in a factory to help her family.", "ans_usage": "ë¶€ì‚¬", "ans_target": "worked" },
        { "q": "She went to see a famous Chinese general.", "ans_usage": "ë¶€ì‚¬", "ans_target": "went" },
        { "q": "I'm here to collect my gold.", "ans_usage": "ë¶€ì‚¬", "ans_target": "here" },
        { "q": "They wear something red to avoid evil spirits.", "ans_usage": "ë¶€ì‚¬", "ans_target": "wear" },
        { "q": "In late fall, they go far from the sea to have a baby.", "ans_usage": "ë¶€ì‚¬", "ans_target": "go" },
        { "q": "Everyone has the right to be happy.", "ans_usage": "í˜•ìš©ì‚¬", "ans_target": "right" },
        { "q": "Make a greater effort to fix your bad habit.", "ans_usage": "í˜•ìš©ì‚¬", "ans_target": "effort" }
        // (ì‹¤ì œ ë°ì´í„°ëŠ” íŒŒì‹± ê²°ê³¼ì— ë”°ë¼ 25ê°œê¹Œì§€ í¬í•¨ë©ë‹ˆë‹¤)
    ];

    let quizSet = [], currentIdx = 0, score = 0, selectedUsage = '', results = [];

    function prepareQuiz() {
        if(!document.getElementById('name').value) return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.");
        quizSet = [...allQuestions].sort(() => Math.random() - 0.5).slice(0, 10);
        document.getElementById('setup-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if(currentIdx >= 10) return finishQuiz();
        document.getElementById('question-text').innerText = quizSet[currentIdx].q;
        document.getElementById('target-input').value = '';
        selectedUsage = '';
        document.querySelectorAll('.btn-usage').forEach(b => b.classList.remove('selected'));
        document.getElementById('progress-inner').style.width = (currentIdx / 10 * 100) + "%";
    }

    function selectUsage(val) {
        selectedUsage = val;
        document.querySelectorAll('.btn-usage').forEach(b => b.classList.remove('selected'));
        if(val === 'í˜•ìš©ì‚¬') document.getElementById('btn-adj').classList.add('selected');
        else document.getElementById('btn-adv').classList.add('selected');
    }

    function submitAnswer() {
        const targetVal = document.getElementById('target-input').value.trim().toLowerCase();
        if(!selectedUsage || !targetVal) return alert("ìš©ë²• ì„ íƒê³¼ ë‹¨ì–´ ì…ë ¥ì„ ëª¨ë‘ ì™„ë£Œí•˜ì„¸ìš”.");

        const item = quizSet[currentIdx];
        const isUsageCorrect = selectedUsage === item.ans_usage;
        const isTargetCorrect = targetVal === item.ans_target.toLowerCase();
        const isAllCorrect = isUsageCorrect && isTargetCorrect;

        results.push({
            q: item.q,
            userUsage: selectedUsage,
            userTarget: targetVal,
            ansUsage: item.ans_usage,
            ansTarget: item.ans_target,
            isCorrect: isAllCorrect
        });

        if(isAllCorrect) score++;
        currentIdx++;
        loadQuestion();
    }

    function finishQuiz() {
        document.getElementById('quiz-page').classList.add('hidden');
        document.getElementById('result-page').classList.remove('hidden');
        document.getElementById('score-val').innerText = score;
        const area = document.getElementById('wrong-list');
        results.filter(r => !r.isCorrect).forEach(w => {
            area.innerHTML += `<div class="wrong-item"><strong>${w.q}</strong><br>ë‚´ ë‹µ: ${w.userUsage} / ${w.userTarget}<br>ì •ë‹µ: ${w.ansUsage} / ${w.ansTarget}</div>`;
        });
    }
</script>
</body>
</html>