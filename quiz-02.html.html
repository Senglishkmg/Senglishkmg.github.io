<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>문장성분과 품사 퀴즈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .result-item {
            border-left: 4px solid;
        }
        .choice-btn {
            transition: all 0.2s ease-in-out;
        }
        .choice-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .choice-btn:disabled {
            cursor: not-allowed;
        }
        .correct {
            background-color: #10B981 !important; /* Tailwind green-500 */
            color: white !important;
            border-color: #059669 !important; /* Tailwind green-600 */
        }
        .incorrect {
            background-color: #EF4444 !important; /* Tailwind red-500 */
            color: white !important;
            border-color: #DC2626 !important; /* Tailwind red-600 */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-6 sm:p-8 space-y-6">
        <header class="text-center">
            <h1 class="text-3xl font-bold text-gray-800">문장성분과 품사 퀴즈</h1>
            <p class="text-gray-500 mt-2">다음을 읽고 빈칸에 들어갈 알맞은 말을 고르세요.</p>
        </header>

        <div id="quiz-container">
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
            <p id="progress-text" class="text-center text-sm text-gray-500 mb-4">문제 1 / 16</p>

            <!-- Question Area -->
            <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 text-center mb-4">
                <p id="question-text" class="text-lg sm:text-xl text-gray-700 leading-relaxed h-24 flex items-center justify-center"></p>
            </div>

            <!-- Choices Area -->
            <div id="choices-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <!-- Choices will be injected here -->
            </div>
        </div>

        <!-- Result Area -->
        <div id="result-container" class="hidden">
            <!-- Results will be injected here -->
        </div>

        <!-- Button Area -->
        <div id="button-container" class="flex justify-center mt-6">
             <button id="next-btn" class="hidden w-1/2 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                다음 문제
            </button>
            <button id="download-btn" class="hidden w-auto bg-teal-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-transform transform hover:scale-105">
                결과 저장하기
            </button>
            <button id="restart-btn" class="hidden w-auto bg-gray-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-transform transform hover:scale-105 ml-4">
                다시 풀기
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const allQuestions = [
                {
                    question: "품사란 ___가/이 가진 고유한 ___에 따른 분류를 말한다. ___가/이 변하지 않는 한 ___도 변하지 않으며, 한 단어가 여러 ___를 가질 수 있다.",
                    choices: [ "단어 - 의미 - 의미 - 품사 - 품사", "문장 - 역할 - 역할 - 문장성분 - 문장성분", "단어 - 위치 - 위치 - 역할 - 역할", "의미 - 품사 - 품사 - 단어 - 단어" ],
                    answer: "단어 - 의미 - 의미 - 품사 - 품사"
                },
                {
                    question: "명사는 사물의 ___을/를 나타내며, 문장에서 ___, ___, ___로 쓰인다.",
                    choices: [ "이름 - 주어 - 목적어 - 보어", "상태 - 서술어 - 목적어 - 보어", "동작 - 주어 - 서술어 - 목적어", "이름 - 수식어 - 주어 - 목적어" ],
                    answer: "이름 - 주어 - 목적어 - 보어"
                },
                {
                    question: "대명사는 ___을/를 대신하는 말로, 문장에서 ___, ___, ___의 역할을 한다.",
                    choices: [ "명사 - 주어 - 목적어 - 보어", "동사 - 서술어 - 수식어 - 보어", "형용사 - 수식어 - 보어 - 주어", "명사 - 서술어 - 목적어 - 주어" ],
                    answer: "명사 - 주어 - 목적어 - 보어"
                },
                {
                    question: "동사는 ___과/와 ___을/를 나타내며, 문장에서 ___로 쓰인다.",
                    choices: [ "동작 - 상태 - 서술어", "이름 - 역할 - 주어", "수식 - 상태 - 보어", "주체 - 대상 - 목적어" ],
                    answer: "동작 - 상태 - 서술어"
                },
                {
                    question: "형용사는 ___을/를 꾸며주거나 보충 설명하며, 문장에서 ___ 또는 ___로 쓰인다.",
                    choices: [ "명사 - 수식어 - 보어", "동사 - 주어 - 목적어", "부사 - 목적어 - 보어", "문장 전체 - 수식어 - 서술어" ],
                    answer: "명사 - 수식어 - 보어"
                },
                {
                    question: "부사는 주로 동사, 형용사, 다른 부사, 문장 전체를 수식하며 ___, ___, ___ 등을 나타낸다.",
                    choices: [ "시간 - 장소 - 이유", "주체 - 대상 - 목적", "이름 - 상태 - 동작", "연결 - 감정 - 수량" ],
                    answer: "시간 - 장소 - 이유"
                },
                {
                    question: "___ 앞에 놓여 시간, 장소, 방향 등을 나타내는 `in`, `at`, `on`과 같은 짧은 말을 ___라고 한다.",
                    choices: [ "명사 - 전치사", "동사 - 접속사", "형용사 - 감탄사", "부사 - 대명사" ],
                    answer: "명사 - 전치사"
                },
                {
                    question: "단어와 단어, 구와 구, 절과 절을 ___해주는 `and`, `but`, `so`와 같은 말을 ___라고 한다.",
                    choices: [ "연결 - 접속사", "수식 - 부사", "대신 - 대명사", "표현 - 감탄사" ],
                    answer: "연결 - 접속사"
                },
                {
                    question: "`Wow!`, `Oh!` 와 같이 기쁨, 놀람 등 감정을 표현하는 말을 ___라고 한다.",
                    choices: [ "감탄사", "전치사", "대명사", "형용사" ],
                    answer: "감탄사"
                },
                {
                    question: "문장성분은 문장 안에서 단어가 하는 ___을/를 말하며, 같은 단어라도 문장에 따라 ___이/가 달라질 수 있다.",
                    choices: [ "역할 - 역할", "의미 - 의미", "품사 - 품사", "기능 - 기능" ],
                    answer: "역할 - 역할"
                },
                {
                    question: "주어는 동작이나 상태의 ___이/가 되며, 이 역할을 할 수 있는 품사는 ___와/과 ___이다.",
                    choices: [ "주체 - 명사 - 대명사", "대상 - 동사 - 형용사", "주체 - 형용사 - 부사", "상태 - 명사 - 동사" ],
                    answer: "주체 - 명사 - 대명사"
                },
                {
                    question: "문장에서 주어의 동작이나 상태를 설명하는 문장성분은 ___이며, 이 역할을 하는 품사는 주로 ___이다.",
                    choices: [ "서술어 - 동사", "목적어 - 명사", "보어 - 형용사", "수식어 - 부사"],
                    answer: "서술어 - 동사"
                },
                {
                    question: "목적어는 서술어가 나타내는 동작의 ___이/가 되며, 이 역할을 할 수 있는 품사는 ___와/과 ___이다.",
                    choices: [ "대상 - 명사 - 대명사", "주체 - 명사 - 형용사", "대상 - 동사 - 부사", "원인 - 전치사 - 접속사" ],
                    answer: "대상 - 명사 - 대명사"
                },
                {
                    question: "보어는 ___나/이나 ___을/를 보충 설명하는 말이며, 이 역할을 할 수 있는 품사는 ___, ___, ___ 등이다.",
                    choices: [ "주어 - 목적어 - 명사, 대명사, 형용사", "서술어 - 수식어 - 동사, 부사", "주어 - 목적어 - 부사, 전치사", "명사 - 동사 - 형용사, 부사" ],
                    answer: "주어 - 목적어 - 명사, 대명사, 형용사"
                },
                {
                    question: "문장에서 다른 말을 꾸며주는 역할을 하는 문장성분은 ___이며, 이 역할을 할 수 있는 품사는 ___와/과 ___이다.",
                    choices: [ "수식어 - 형용사 - 부사", "보어 - 명사 - 형용사", "주어 - 명사 - 대명사", "서술어 - 동사 - 조동사" ],
                    answer: "수식어 - 형용사 - 부사"
                },
                {
                    question: "부사는 ___를 제외한 다른 것을 수식하는 말이다.",
                    choices: [ "명사", "동사", "형용사", "부사" ],
                    answer: "명사"
                }
            ];

            let quizQuestions = [];
            let currentQuestionIndex = 0;
            let userResults = [];

            const quizContainer = document.getElementById('quiz-container');
            const resultContainer = document.getElementById('result-container');
            const questionText = document.getElementById('question-text');
            const choicesContainer = document.getElementById('choices-container');
            const nextBtn = document.getElementById('next-btn');
            const downloadBtn = document.getElementById('download-btn');
            const restartBtn = document.getElementById('restart-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function startQuiz() {
                quizQuestions = [...allQuestions];
                shuffleArray(quizQuestions); // Shuffle question order
                currentQuestionIndex = 0;
                userResults = [];
                resultContainer.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                nextBtn.classList.add('hidden');
                downloadBtn.classList.add('hidden');
                restartBtn.classList.add('hidden');
                updateProgressText();
                loadQuestion();
            }
            
            function updateProgressText() {
                progressText.textContent = `문제 ${currentQuestionIndex + 1} / ${quizQuestions.length}`;
            }

            function loadQuestion() {
                nextBtn.classList.add('hidden');
                const currentQuestion = quizQuestions[currentQuestionIndex];
                questionText.textContent = currentQuestion.question.replace(/___/g, '_____');
                choicesContainer.innerHTML = '';

                const shuffledChoices = [...currentQuestion.choices];
                shuffleArray(shuffledChoices); // Shuffle choice order

                shuffledChoices.forEach(choice => {
                    const button = document.createElement('button');
                    button.textContent = choice;
                    button.className = "choice-btn w-full bg-white border-2 border-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 hover:border-indigo-400 focus:outline-none";
                    button.onclick = () => selectAnswer(button, choice, currentQuestion.answer);
                    choicesContainer.appendChild(button);
                });
                
                const progress = ((currentQuestionIndex) / quizQuestions.length) * 100;
                progressBar.style.width = `${progress}%`;
                updateProgressText();
            }

            function selectAnswer(button, selectedChoice, correctAnswer) {
                const isCorrect = selectedChoice === correctAnswer;
                userResults.push({
                    question: quizQuestions[currentQuestionIndex].question,
                    selected: selectedChoice,
                    correct: correctAnswer,
                    isCorrect: isCorrect
                });

                Array.from(choicesContainer.children).forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });

                if (!isCorrect) {
                    button.classList.add('incorrect');
                }
                
                nextBtn.classList.remove('hidden');
                if (currentQuestionIndex === quizQuestions.length - 1) {
                    nextBtn.textContent = '결과 보기';
                } else {
                    nextBtn.textContent = '다음 문제';
                }
            }
            
            function showResults() {
                quizContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                nextBtn.classList.add('hidden');
                downloadBtn.classList.remove('hidden');
                restartBtn.classList.remove('hidden');

                const correctCount = userResults.filter(res => res.isCorrect).length;
                let resultHTML = `
                    <div class="fade-in p-4 bg-gray-100 rounded-lg text-center">
                        <h2 class="text-2xl font-bold text-gray-800">퀴즈 결과</h2>
                        <p class="text-3xl font-bold text-indigo-600 my-2">${quizQuestions.length}문제 중 ${correctCount}문제 정답!</p>
                    </div>`;
                
                const wrongAnswers = userResults.filter(res => !res.isCorrect);
                if (wrongAnswers.length > 0) {
                    resultHTML += `<div class="mt-6 text-left space-y-4">
                                    <h3 class="text-xl font-bold text-gray-700">틀린 문제 다시보기</h3>`;
                    wrongAnswers.forEach(res => {
                        resultHTML += `
                            <div class="result-item border-red-400 bg-red-50 p-4 rounded-lg">
                                <p class="text-gray-600 font-semibold">${res.question.replace(/___/g, '_____')}</p>
                                <p class="text-red-600 mt-2">나의 답: ${res.selected}</p>
                                <p class="text-green-600">정답: ${res.correct}</p>
                            </div>`;
                    });
                    resultHTML += `</div>`;
                } else {
                     resultHTML += `<div class="mt-6 text-center">
                                    <p class="text-xl font-bold text-green-600">🎉 모든 문제를 맞혔습니다! 완벽해요!</p>
                                  </div>`;
                }

                resultContainer.innerHTML = resultHTML;
            }

            function downloadResultsFile() {
                let textContent = `문장성분과 품사 퀴즈 결과 (${new Date().toLocaleString('ko-KR')})\n\n`;
                const correctCount = userResults.filter(res => res.isCorrect).length;
                textContent += `총 ${quizQuestions.length}문제 중 ${correctCount}문제 정답\n\n`;

                const wrongAnswers = userResults.filter(res => !res.isCorrect);
                if (wrongAnswers.length > 0) {
                    textContent += "--- 틀린 문제 ---\n\n";
                    wrongAnswers.forEach((res, index) => {
                        textContent += `${index + 1}. 문제: ${res.question.replace(/___/g, '_____')}\n`;
                        textContent += `   나의 답: ${res.selected}\n`;
                        textContent += `   정답: ${res.correct}\n\n`;
                    });
                } else {
                    textContent += "모든 문제를 맞혔습니다!\n";
                }
                
                const blob = new Blob([textContent], { type: 'text/plain;charset=utf-8' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'Quiz_Result_Parts_of_Speech.txt';
                link.click();
            }

            nextBtn.addEventListener('click', () => {
                if (currentQuestionIndex < quizQuestions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    const progress = 100;
                    progressBar.style.width = `${progress}%`;
                    showResults();
                }
            });

            downloadBtn.addEventListener('click', downloadResultsFile);
            restartBtn.addEventListener('click', startQuiz);

            startQuiz();
        });
    </script>
</body>
</html>

