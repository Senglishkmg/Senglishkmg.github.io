<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ìŠ¤ì˜ì–´ì „ë¬¸í•™ì›: Toë¶€ì •ì‚¬ ì‹¤ì „ í…ŒìŠ¤íŠ¸</title>
    <style>
        :root { --primary-color: #4A90E2; --secondary-bg: #F0F4F8; --text-main: #2D3748; --wrong-color: #E53E3E; --correct-color: #38A169; }
        body { font-family: 'Pretendard', sans-serif; background-color: #F7FAFC; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; color: var(--text-main); }
        .container { background: white; width: 95%; max-width: 550px; padding: 35px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.08); margin: 20px; }
        .hidden { display: none; }
        
        /* í—¤ë” & ê°€ì´ë“œ */
        h2 { text-align: center; margin-top: 0; color: #1A365D; }
        .guide-text { background: var(--secondary-bg); padding: 12px; border-radius: 8px; font-size: 0.95rem; color: #4A5568; text-align: center; margin-bottom: 25px; border-left: 4px solid var(--primary-color); font-weight: 500; }
        
        /* ì…ë ¥ì°½ */
        input { width: 100%; padding: 14px; margin-bottom: 12px; border: 1px solid #E2E8F0; border-radius: 10px; box-sizing: border-box; font-size: 16px; outline: none; }
        
        /* ë²„íŠ¼ */
        button { width: 100%; padding: 16px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.2s; margin-bottom: 12px; }
        .btn-main { background-color: var(--primary-color); color: white; }
        .btn-option { background-color: #FFFFFF; color: #4A5568; border: 2px solid #EDF2F7; }
        .btn-option:hover { border-color: var(--primary-color); color: var(--primary-color); }

        /* ë¬¸ì œ ë°•ìŠ¤ */
        #question-box { font-size: 1.3rem; font-weight: 700; color: #1A202C; margin: 30px 0; line-height: 1.6; text-align: center; min-height: 110px; display: flex; align-items: center; justify-content: center; word-break: keep-all; }
        
        /* ì§„í–‰ë¥  */
        .progress-container { display: flex; align-items: center; gap: 10px; margin-bottom: 5px; }
        .progress-bar { flex-grow: 1; height: 8px; background: #EDF2F7; border-radius: 4px; overflow: hidden; }
        #progress-inner { height: 100%; background: var(--primary-color); width: 0%; transition: width 0.3s; }
        .progress-text { font-size: 0.85rem; color: #A0AEC0; font-weight: bold; }

        /* ê²°ê³¼ ë° ì˜¤ë‹µë…¸íŠ¸ */
        .score-circle { width: 100px; height: 100px; border-radius: 50%; border: 6px solid var(--primary-color); display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 10px auto; }
        .score-num { font-size: 1.8rem; font-weight: 800; color: var(--primary-color); }
        
        .wrong-answer-note { margin-top: 30px; text-align: left; border-top: 2px solid #EDF2F7; padding-top: 20px; }
        .wrong-item { background: #FFF5F5; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid var(--wrong-color); }
        .wrong-q { font-weight: bold; margin-bottom: 8px; display: block; }
        .wrong-compare { font-size: 0.9rem; }
        .my-ans { color: var(--wrong-color); font-weight: bold; margin-right: 10px; }
        .correct-ans { color: var(--correct-color); font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div id="setup-page">
        <h2>Toë¶€ì •ì‚¬ ì‹¤ì „ í…ŒìŠ¤íŠ¸</h2>
        <div class="guide-text">í•™êµì™€ ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì‹œí—˜ì„ ì‹œì‘í•˜ì„¸ìš”.</div>
        <input type="text" id="school" placeholder="í•™êµëª…">
        <input type="text" id="student-info" placeholder="í•™ë…„/ë°˜/ë²ˆí˜¸">
        <input type="text" id="name" placeholder="ì„±ëª…">
        <button class="btn-main" onclick="prepareQuiz()">ì‹œí—˜ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="quiz-page" class="hidden">
        <div class="progress-container">
            <div class="progress-bar"><div id="progress-inner"></div></div>
            <span class="progress-text"><span id="current-num">1</span>/10</span>
        </div>
        <div class="guide-text">ğŸ’¡ ë‹¤ìŒ ë¬¸ì¥ì— ì“°ì¸ toë¶€ì •ì‚¬ì˜ ì—­í• ì„ ê³ ë¥´ì‹œì˜¤.</div>
        <div id="question-box"></div>
        <button class="btn-option" onclick="handleAnswer('ì£¼ì–´')">1. ì£¼ì–´ ì—­í• </button>
        <button class="btn-option" onclick="handleAnswer('ëª©ì ì–´')">2. ëª©ì ì–´ ì—­í• </button>
        <button class="btn-option" onclick="handleAnswer('ë³´ì–´')">3. ë³´ì–´ ì—­í• </button>
    </div>

    <div id="result-page" class="hidden">
        <h2>í…ŒìŠ¤íŠ¸ ì™„ë£Œ</h2>
        <div style="text-align: center; margin-bottom: 20px;">
            <p id="user-display" style="font-weight: bold;"></p>
            <div class="score-circle">
                <span class="score-num" id="final-score">0</span>
                <span style="font-size:0.7rem; color:#718096;">/ 10 ì </span>
            </div>
        </div>

        <div id="wrong-section" class="wrong-answer-note hidden">
            <h3 style="font-size: 1.1rem; color: #E53E3E;">ğŸ” ì˜¤ë‹µ ì²´í¬</h3>
            <div id="wrong-list"></div>
        </div>

        <button class="btn-main" style="margin-top:20px;" onclick="downloadResult()">ê²°ê³¼ íŒŒì¼ ì €ì¥í•˜ê¸°</button>
        <button class="btn-option" onclick="copyResult()" style="border-style: dashed;">ê²°ê³¼ ìš”ì•½ ë³µì‚¬</button>
        <button style="background:none; color:#A0AEC0; font-size:0.85rem; border:none; cursor:pointer;" onclick="location.reload()">ìƒˆë¡œìš´ ë¬¸ì œ í’€ê¸°</button>
    </div>
</div>

<script>
    const allQuestions = [
        {"question": "She wanted to take good pictures, too.", "answer": "ëª©ì ì–´"},
        {"question": "She really likes to take pictures.", "answer": "ëª©ì ì–´"},
        {"question": "My plan is to learn Spanish.", "answer": "ë³´ì–´"},
        {"question": "It was to do a presentation about their own special talents.", "answer": "ë³´ì–´"},
        {"question": "He liked to go out and meet his people.", "answer": "ëª©ì ì–´"},
        {"question": "Oh, I forgot to have lunch.", "answer": "ëª©ì ì–´"},
        {"question": "He picked up a long brush and started to paint.", "answer": "ëª©ì ì–´"},
        {"question": "After dinner, he and Dad started to sing together.", "answer": "ëª©ì ì–´"},
        {"question": "Don't forget to smile!", "answer": "ëª©ì ì–´"},
        {"question": "My wish is to live in a beautiful house on the hill.", "answer": "ë³´ì–´"},
        {"question": "I try to memorize three expressions every day.", "answer": "ëª©ì ì–´"},
        {"question": "I want to be good at it.", "answer": "ëª©ì ì–´"},
        {"question": "Eric wants to have an animal friend.", "answer": "ëª©ì ì–´"},
        {"question": "I don't like to practice the same thing again.", "answer": "ëª©ì ì–´"},
        {"question": "I want to hang out with my friends after school.", "answer": "ëª©ì ì–´"},
        {"question": "I will try to give you fun and useful homework.", "answer": "ëª©ì ì–´"},
        {"question": "Many people from all over the world try to do something green on this day.", "answer": "ëª©ì ì–´"},
        {"question": "Do you want to join them?", "answer": "ëª©ì ì–´"},
        {"question": "Sally liked to walk along the beach.", "answer": "ëª©ì ì–´"},
        {"question": "She hoped to find someone tomorrow.", "answer": "ëª©ì ì–´"},
        {"question": "I try to think of something or someone with a new word.", "answer": "ëª©ì ì–´"},
        {"question": "Sally's pet feels cool and dry and likes to eat vegetables.", "answer": "ëª©ì ì–´"},
        {"question": "It likes to eat carrots, and grass.", "answer": "ëª©ì ì–´"},
        {"question": "Jamal's pet likes to swim.", "answer": "ëª©ì ì–´"},
        {"question": "To swim in this river is dangerous.", "answer": "ì£¼ì–´"},
        {"question": "This year, we plan to visit nursing homes in our town.", "answer": "ëª©ì ì–´"},
        {"question": "My mom and I want to cook for the elderly people.", "answer": "ëª©ì ì–´"},
        {"question": "We want to sing and dance for the elderly people.", "answer": "ëª©ì ì–´"},
        {"question": "We're planning to visit Evergreen Nursing Home.", "answer": "ëª©ì ì–´"},
        {"question": "I'll learn to fly an airplane in China and become a pilot.", "answer": "ëª©ì ì–´"},
        {"question": "It is fun to watch this program.", "answer": "ì£¼ì–´"},
        {"question": "A young man, Lord Hunter, wanted to marry her.", "answer": "ëª©ì ì–´"},
        {"question": "To know oneself is very difficult.", "answer": "ì£¼ì–´"},
        {"question": "I decided to overcome my limitations.", "answer": "ëª©ì ì–´"},
        {"question": "I began to master daily tasks.", "answer": "ëª©ì ì–´"},
        {"question": "The fire truck tried to pull the truck.", "answer": "ëª©ì ì–´"},
        {"question": "My parents want to know everything about my life.", "answer": "ëª©ì ì–´"},
        {"question": "People love to make sandwiches with bagels or just eat them with cream cheese.", "answer": "ëª©ì ì–´"},
        {"question": "Then, you need to learn some magic words.", "answer": "ëª©ì ì–´"},
        {"question": "When your friend gives you a hand, you must not forget to say 'thank you.'", "answer": "ëª©ì ì–´"},
        {"question": "Then, do not hesitate to apologize for your mistake.", "answer": "ëª©ì ì–´"},
        {"question": "A happy little dog learned of this place and decided to visit it.", "answer": "ëª©ì ì–´"},
        {"question": "In this same village, another little dog decided to visit the house.", "answer": "ëª©ì ì–´"},
        {"question": "The easiest way is to take a taxi.", "answer": "ë³´ì–´"},
        {"question": "The referee needs to tell the goalkeeper from the other players.", "answer": "ëª©ì ì–´"},
        {"question": "We didn't want to write anything good about our group members.", "answer": "ëª©ì ì–´"},
        {"question": "People began to eat bread around 10,000 years ago.", "answer": "ëª©ì ì–´"},
        {"question": "My hobby is to collect stamps.", "answer": "ë³´ì–´"},
        {"question": "I hoped not to see you again.", "answer": "ëª©ì ì–´"},
        {"question": "After three weeks, the other young people began to talk about their plants.", "answer": "ëª©ì ì–´"},
        {"question": "His mother told him to be honest.", "answer": "ë³´ì–´"},
        {"question": "He told Ling to come to the front.", "answer": "ë³´ì–´"},
        {"question": "Amy thought about her wish and started to write.", "answer": "ëª©ì ì–´"},
        {"question": "Ask your mother to cut down your weekly allowance when you do your bad habit.", "answer": "ë³´ì–´"},
        {"question": "Many people want to eat sweets.", "answer": "ëª©ì ì–´"},
        {"question": "First, camels started to store fat in their bodies.", "answer": "ëª©ì ì–´"},
        {"question": "My job is to translate English into Korean.", "answer": "ë³´ì–´"},
        {"question": "It is pleasant to talk with Mary.", "answer": "ì£¼ì–´"},
        {"question": "It is interesting to study grammar.", "answer": "ì£¼ì–´"},
        {"question": "To ride a motorcycle without a helmet is dangerous.", "answer": "ì£¼ì–´"},
        {"question": "He promised not to lie again.", "answer": "ëª©ì ì–´"}
    ];

    let quizSet = [];
    let currentIdx = 0;
    let score = 0;
    let results = []; // ì „ì²´ í’€ì´ ê²°ê³¼ ì €ì¥

    function prepareQuiz() {
        if (!document.getElementById('name').value) return alert("ì„±ëª…ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        quizSet = [...allQuestions].sort(() => Math.random() - 0.5).slice(0, 10);
        currentIdx = 0; score = 0; results = [];
        document.getElementById('setup-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if (currentIdx >= quizSet.length) { finishQuiz(); return; }
        document.getElementById('question-box').innerText = quizSet[currentIdx].question;
        document.getElementById('current-num').innerText = currentIdx + 1;
        document.getElementById('progress-inner').style.width = ((currentIdx + 1) / quizSet.length * 100) + "%";
    }

    function handleAnswer(choice) {
        const correct = quizSet[currentIdx].answer;
        const isCorrect = choice === correct;
        
        // ê²°ê³¼ ë°°ì—´ì— ìƒì„¸ ì •ë³´ ì €ì¥
        results.push({
            question: quizSet[currentIdx].question,
            userChoice: choice,
            correctAnswer: correct,
            isCorrect: isCorrect
        });

        if (isCorrect) score++;
        currentIdx++;
        loadQuestion();
    }

    function finishQuiz() {
        document.getElementById('quiz-page').classList.add('hidden');
        document.getElementById('result-page').classList.remove('hidden');
        document.getElementById('user-display').innerText = 
            `${document.getElementById('school').value} ${document.getElementById('student-info').value} ${document.getElementById('name').value} í•™ìƒ`;
        document.getElementById('final-score').innerText = score;

        // ì˜¤ë‹µ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        const wrongList = results.filter(r => !r.isCorrect);
        const listDiv = document.getElementById('wrong-list');
        listDiv.innerHTML = '';

        if (wrongList.length > 0) {
            document.getElementById('wrong-section').classList.remove('hidden');
            wrongList.forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = 'wrong-item';
                div.innerHTML = `
                    <span class="wrong-q">Q. ${item.question}</span>
                    <div class="wrong-compare">
                        ë‚´ ë‹µ: <span class="my-ans">${item.userChoice}</span> 
                        ì •ë‹µ: <span class="correct-ans">${item.correctAnswer}</span>
                    </div>
                `;
                listDiv.appendChild(div);
            });
        }
    }

    function getResultSummary() {
        const name = document.getElementById('name').value;
        const wrongText = results.filter(r => !r.isCorrect)
            .map(r => `- ë¬¸ì œ: ${r.question}\n  (ë‚˜ì˜ë‹µ: ${r.userChoice} / ì •ë‹µ: ${r.correctAnswer})`).join('\n');
        
        return `[í…ŒìŠ¤íŠ¸ ê²°ê³¼] ${name} í•™ìƒ\n- ì ìˆ˜: ${score}/10\n- ì¼ì‹œ: ${new Date().toLocaleString()}\n\n[ì˜¤ë‹µë…¸íŠ¸]\n${wrongText || "ì—†ìŒ(ë§Œì !)"}`;
    }

    function downloadResult() {
        const text = getResultSummary();
        const blob = new Blob([text], { type: 'text/plain' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `${document.getElementById('name').value}_í…ŒìŠ¤íŠ¸ê²°ê³¼.txt`;
        a.click();
    }

    function copyResult() {
        const text = `${document.getElementById('name').value}: ${score}/10ì  ì™„ë£Œ!`;
        navigator.clipboard.writeText(text).then(() => alert("ìš”ì•½ ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤."));
    }
</script>

</body>
</html>